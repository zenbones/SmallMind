<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

  <packaging>tanukisoft</packaging>

  <profiles>
    <profile>
      <id>windows-x86-32</id>
      <activation>
        <os>
          <family>windows</family>
          <arch>x86</arch>
        </os>
      </activation>
      <properties>
        <tanukisoft.wrapper.os>WINDOWS_X86_32</tanukisoft.wrapper.os>
      </properties>
    </profile>
    <profile>
      <id>windows-x86-64</id>
      <activation>
        <os>
          <family>windows</family>
          <arch>x86_64</arch>
        </os>
      </activation>
      <properties>
        <tanukisoft.wrapper.os>WINDOWS_X86_64</tanukisoft.wrapper.os>
      </properties>
    </profile>
    <profile>
      <id>windows-amd-64</id>
      <activation>
        <os>
          <family>windows</family>
          <arch>amd64</arch>
        </os>
      </activation>
      <properties>
        <tanukisoft.wrapper.os>WINDOWS_X86_64</tanukisoft.wrapper.os>
      </properties>
    </profile>
    <profile>
      <id>mac</id>
      <activation>
        <os>
          <family>mac</family>
        </os>
      </activation>
      <properties>
        <tanukisoft.wrapper.os>MACOSX_UNIVERSAL_64</tanukisoft.wrapper.os>
      </properties>
    </profile>
    <profile>
      <id>linux-x86-32</id>
      <activation>
        <os>
          <name>linux</name>
          <arch>x86</arch>
        </os>
      </activation>
      <properties>
        <tanukisoft.wrapper.os>LINUX_X86_32</tanukisoft.wrapper.os>
      </properties>
    </profile>
    <profile>
      <id>linux-x86-64</id>
      <activation>
        <os>
          <name>linux</name>
          <arch>x86_64</arch>
        </os>
      </activation>
      <properties>
        <tanukisoft.wrapper.os>LINUX_X86_64</tanukisoft.wrapper.os>
      </properties>
    </profile>
    <profile>
      <id>linux-amd-64</id>
      <activation>
        <os>
          <name>linux</name>
          <arch>amd64</arch>
        </os>
      </activation>
      <properties>
        <tanukisoft.wrapper.os>LINUX_X86_64</tanukisoft.wrapper.os>
      </properties>
    </profile>
  </profiles>

  <dependencies>
    <dependency>
      <groupId>org.smallmind</groupId>
      <artifactId>spark-tanukisoft-integration</artifactId>
      <scope>compile</scope>
    </dependency>
  </dependencies>

  <build>
    <plugins>
      <plugin>
        <groupId>org.smallmind</groupId>
        <artifactId>spark-tanukisoft-maven-plugin</artifactId>
        <extensions>true</extensions>
        <configuration>
          <skip>false</skip>
          <licenseFile>${user.home}/.m2/wrapper-license.conf</licenseFile>
          <runAs>root</runAs>
          <useUpstart>true</useUpstart>
          <compression>zip</compression>
          <includeVersion>false</includeVersion>
          <operatingSystem>${tanukisoft.wrapper.os}</operatingSystem>
          <wrapperListener>org.smallmind.spark.tanukisoft.integration.spring.ClassPathXmlSpringContextWrapperListener</wrapperListener>
          <jvmInitMemoryMB>512</jvmInitMemoryMB>
          <jvmMaxMemoryMB>512</jvmMaxMemoryMB>
          <appParameters>
            <appParameter>com/mydomain/spring1.xml</appParameter>
            <appParameter>com/mydomain/spring2.xml</appParameter>
          </appParameters>
          <jvmArgs>
            <jvmArg>-server</jvmArg>
            <jvmArg>-XX:+AggressiveOpts</jvmArg>
            <jvmArg>-XX:+UseCompressedOops</jvmArg>
            <jvmArg>-XX:+DoEscapeAnalysis</jvmArg>
            <jvmArg>-XX:+UseConcMarkSweepGC</jvmArg>
            <jvmArg>-XX:+UseParNewGC</jvmArg>
            <jvmArg>-XX:ParallelGCThreads=16</jvmArg>
            <!--
            <jvmArg>-XX:+UnlockExperimentalVMOptions</jvmArg>
            <jvmArg>-XX:+UseG1GC</jvmArg>
            -->
            <jvmArg>-XX:+UseNUMA</jvmArg>
            <jvmArg>-Xdebug</jvmArg>
            <jvmArg>-Xrunjdwp:transport=dt_socket,address=8178,server=y,suspend=n</jvmArg>
            <jvmArg>-Dtc.config=../conf/tc-config.xml</jvmArg>
          </jvmArgs>
          <configurations>
            <configuration>${project.build.directory}/classes/tc-config.xml</configuration>
          </configurations>
        </configuration>
      </plugin>
    </plugins>
  </build>

</project>
